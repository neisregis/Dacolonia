<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clientes do Representante</title>
</head>
<body>
    <h1>Lista de Clientes para o Representante</h1>
    
    <ul id="listaClientes"></ul>

    <script>
        // Função para obter parâmetros da URL
        function getParameterByName(name) {
            const url = new URL(window.location.href);
            return url.searchParams.get(name);
        }

        // Obtém o código do representante da URL
        const repCode = getParameterByName('repCode');

        // Caminho para o arquivo JSON
        const url = 'https://neisregis.github.io/Dacolonia/Supervisores_e_Reps_Codigos.json';

        // Faz a requisição e filtra os clientes pelo código do representante
        fetch(url)
            .then(response => response.json())
            .then(data => {
                console.log(data); // Verifica o conteúdo do JSON no console

                // Verifica se existe um representante com o código fornecido
                if (data['1091'] && data['1091']['representantes'] && data['1091']['representantes'][repCode]) {
                    const clientes = data['1091']['representantes'][repCode]; // Lista de clientes para o representante

                    // Exibe os clientes na página
                    const lista = document.getElementById('listaClientes');
                    lista.innerHTML = ''; // Limpa a lista anterior
                    clientes.forEach(cliente => {
                        const listItem = document.createElement('li');
                        listItem.textContent = `Código do Cliente: ${cliente}`;
                        lista.appendChild(listItem);
                    });
                } else {
                    // Caso não haja clientes ou código de representante
                    document.getElementById('listaClientes').innerHTML = 'Nenhum cliente encontrado para este representante.';
                }
            })
            .catch(error => console.error('Erro ao buscar os dados:', error));
    </script>
</body>
</html>
